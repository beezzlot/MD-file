# Лабораторная работа №1. Тема: "Установка Операционной системы в виртуальной среде"
Цель работы
----------
приобрести навыки установки операционной системы;

приобрести навыки настройки операционной системы;

приобрести навыки создания виртуальных машин.

Оборудование, ПО:
----------
ISO-образ Astra Linux Орёл.

Доступ к сетевым репозиториям.

Включенная виртуализация на хостовом компьютере.

Ход работы:
----------
Astra Linux («А́стра Ли́нукс», от лат. astra — «звезда») — операционная система на
базе ядра Linux, созданная для комплексной защиты информации и построения
защищённых автоматизированных систем. Востребована в первую очередь в
российских силовых ведомствах, государственных органах и государственных
корпорациях. Обеспечивает степень защиты обрабатываемой информации до уровня
государственной тайны «особой важности» включительно. Сертифицирована в
системах сертификации средств защиты информации Минобороны, ФСТЭК и ФСБ
России. Включена в Единый реестр российских программ Минкомсвязи России.
Минимальные системные требования для работы Astra Linux Орёл с графическим
окружением:

 | **Оперативная память** | от 4 гб |
| -------------------| ------------ |
| **Объем дискового пространства**           | от 16 гб
| **Процессор**        | Архитектура x86            |

Перейдем к созданию виртуальной машины с операционной системой Astra Linux

# Это нужно знать!


---------------

**Виртуальная машина** (ВМ или VM) — это виртуальный компьютер, который
использует выделенные ресурсы реального компьютера (процессор, диск, адаптер).
Эти ресурсы хранятся локально на вычислительном устройстве и позволяют ВМ
работать автономно. Простыми словами, виртуальная машина позволяет создать на
одном компьютере ещё один компьютер, который будет использовать его ресурсы, но
работать изолированно.

Система, которая содержит и запускает образа виртуальных машин называется
**системой виртуализации** или **гипервизор**.

Гипервизоры разделяются на типы: первый и второй.

**Гипервизор первого типа** - автономный гипервизор, который устанавливается на
хостовую машину в качестве операционной системы и позволяет виртуальным
машинам обращаться к вычислительным ресурсам напрямую, без посредника в виде
основной операционной системы. Примеры: Vmware ESXi, Windows Hyper-V

**Гипервизор второго типа**- гипервизор, работающий на базе основной операционной
системы. В таком случае, виртуальные машины не имеют прямого доступа к
вычислительным ресурсам компьютера. Обращение к вычислительным ресурсам
проходит через основную ОС. Примеры: Vmware Workstation, Virtual Box.

---------------------
1)  Откройте VirtualBox на вашем рабочем месте, затем выберите параметр “Создать”

![Картинка](./Screen1.png)

---------------------

2) На следующем этапе необходимо заполнить информацию о нашей виртуальной
машине.

**В пункте имя** - укажите желаемое имя виртуального компьютера.

**В пункте “Папка Машины”** - необходимо указать путь, где бы вы хотели расположить
системные файлы вашей виртуальной машин.

**Тип** -  указывается семейство операционной системы, которую планируете установить.

**Версия** - указывается операционная система, которую планируете установить.
Если не можете найти необходимый дистрибутив в данном списке, то можно
универсальный вариант - **Other Linux (64-bit)**, в случае если планируется установить
64-битную систему или **Other Linux (32-bit)**, в случае если планируется установить
32-битную систему

![Картинка](./Screen2.png)

---------------------

3) На следующем этапе помощник по развертыванию виртуальной машины
потребует указать количество оперативной памяти, которую мы выделяем для
её работы. Укажем 4 ГБ.

![Картинка](./Screen3.png)

---------------------

4) На следующем этапе необходимо указать параметры жесткого диска.

![Картинка](./Screen4.png)

**Не подключать виртуальный жесткий диск** - создание виртуальной машины без
жесткого диска

**Создать новый виртуальный жесткий диск** - создание нового виртуального жесткого
диска для ВМ

**Использовать существующий виртуальный жесткий диск** - подключить к виртуальной
машине уже существующий жесткий диск. Это может быть полезно, если вам
необходимо создать копию ранее развернутой машины.

---------------------

5)  На следующем этапе установщик потребует указать желаемый тип
виртуального жесткого диска.

![Картинка](./Screen5.png)

Разберемся, на что влияет выбор жесткого диска:
 * VDI (VirtualBox Image) - формат файла, разработанный Oracle для
использования в качестве образа диска в своих виртуальных машинах.
Поддерживается программой Virtual Box. Выберите данный вариант, если в
дальнейшем у вас не будет необходимости мигрировать данный образ
виртуальной машины в другие системы виртуализации.

 * VHD (Virtual Hard Disk) - формат файла, разработанный Microsoft для
использования в качестве образа диска в своих виртуальных машинах.
Поддерживается системой виртуализации Hyper-V. Выберите данный вариант,
если в дальнейшем у вас может возникнуть задача в миграции данной
виртуальной машины в систему Hyper-V.

 * VMDK (Virtual Machine Disk) - формат файла, разработанный Vmware для
использования в качестве образа диска в своих виртуальных машинах.
Поддерживается системой виртуализации Vmware ESXi и Vmware Workstation.
Выберите данный вариант, если в дальнейшем у вас может возникнуть задача в
миграции данной виртуальной машины в систему Vmware ESXi.

**В рамках нашей работы, выберем вариант VDI**

---------------------

6)  Далее система уточнит формат хранения.

![Картинка](./Screen6.png)

Описания, представленного программой VirtualBox, вполне хватит, чтобы разобраться
в разнице этих двух дисков.

Стоит лишь добавить, что вариант с динамическим расширением работает медленнее,
так как программному обеспечению требуется постоянно увеличивать диск.

Вариант с фиксированным диском позволит вам жестко настроить количество
потребляемых ресурсов, а также ускорит работу виртуальной машины.

В рамках нашей работы выберем вариант с “Фиксированный виртуальный жесткий
диск”.

---------------------

7) Далее укажем объем диска.

![Картинка](./Screen7.png)

**Укажите путь до той директории, где есть свободные 16 ГБ постоянной памяти.**

После настроек диска, нажимаем “Создать”.

---------------------

8)  После создания виртуальной машины нажмите “Настроить” - это необходимо
для того, чтобы примонтировать ISO-образ AstraLinux Орёл.

![Картинка](./Screen8.png)

---------------------

9)  В “Настройках” у нас есть возможность изменить параметры нашей
виртуальной машины. Добавить дополнительную оперативную память, несколько
жестких дисков, аудио-интерфейсы, сетевые интерфейсы и т.д.

Переходим в “Носители” → “Контроллер IDE” → “Пусто” → “Атрибуты оптического
привода”.

![Картинка](./Screen9.png)

---------------------

10) Переходим в параметр “Выбрать файл диска…”

![Картинка](./Screen10.png)

В открывшемся окне необходимо будет перейти в папку, где хранится ISO образ
операционной системы. В нашем примере мы разместили образ на рабочем столе.

![Картинка](./Screen11.png)

---------------------

11) Также перейдем в настройки “Сеть” → “Тип подключения - Сетевой мост”. В
параметре “Имя” выберите имя интерфейса, который на вашем компьютере подключен
в локальную компьютерную сеть, в которой реализован доступ до репозиториев. В
примере ниже, это интерфейс - eth0

![Картинка](./Screen12.png)

**Как выяснить имя интерфейса?**

Откройте меню Пуск → Системные → Терминал Fly

![Картинка](./Screen13.png)

В консоли введите команду - **ip a**

![Картинка](./Screen14.png)

В нашем примере именно этот интерфейс подключен в сеть с доступом к репозиторию.

Вернемся в программу Virtual Box.
Настройки завершены, выбираем “Да” и завершаем преднастройки нашего виртуального компьютера.

![Картинка](./Screen15.png)

---------------------

12) Нажимаем “Запустить”

![Картинка](./Screen16.png)

После автоматически загрузится установщик операционной системы AstraLinux.

**Обратите внимание, что по-умолчанию VirtualBox выполняет захват клавиатуры
в виртуальную машину. Для того чтобы вернуть клавиатуру и мышь в хостовую
ОС нажмите правый Ctrl**

---------------------

13) Соглашаемся на “Графическую установку” виртуальной машины. Нажмите Enter
(Ввод).

![Картинка](./Screen17.png)

---------------------

14) Внимательно изучив лицензионное соглашение, нажимаем “Продолжить”

![Картинка](./Screen18.png)

---------------------

15) Выберите удобный способ переключения между раскладками и далее нажмите
“Продолжить”.

![Картинка](./Screen19.png)

---------------------

16) Далее необходимо указать имя нашего виртуального компьютера, введем его имя -
astralab и нажмем продолжить.

![Картинка](./Screen20.png)

---------------------

17) Далее необходимо выбрать Имя учетной записи администратора компьютера.

Введем имя - administrator.

![Картинка](./Screen21.png)

Стоит уточнить, что по-умолчанию в Linux дистрибутивах пользователем с правами
администратора(суперпользователя в Linux-терминологии) является root (с англ.
корень). В Astra Linux, права суперпользователя выдаются не только root, но и также
созданному в процессе установки дополнительному пользователю, именно он был
создан на этом этапе установки.
Данный пользователь не является “суперпользователем” по-настоящему, а лишь имеет
право запускать команду - sudo (англ. Substitute User and do, дословно «подменить
пользователя и выполнить»), которое позволяет запускать команды с повышенными
привилегиями.

---------------------

18) Далее введем пароль от пользователя. Придумайте сложный пароль или
воспользуйтесь универсальным паролем для **лабораторных работ - P@ssw0rd**

![Картинка](./Screen22.png)

---------------------

19) Установите часовой пояс

![Картинка](./Screen23.png)

---------------------

20) Далее необходимо выбрать метод разметки дисков.
Так как наш образ потенциально должен стать “золотым” для развертывания в
дальнейшем на компьютеры с разным количеством дисков и объема,
выбираем вариант с разметкой диска с использованием LVM

![Картинка](./Screen24.png)

---------------------

21) Выбираем единственный доступный диск для установки операционной системы

![Картинка](./Screen25.png)

---------------------

22) Выбираем параметр, “отдельный раздел для /home”

В /home, по-умолчанию, создаются все профили пользователей, где они хранят свои
локальные файлы.

Создавая отдельный раздел для /home - мы открываем в будущем себе возможность
расширять данный раздел, в случае нехватки пространства памяти.

![Картинка](./Screen26.png)

---------------------

23) После этого соглашаемся на запись изменений на диск и нажимаем “Продолжить”

![Картинка](./Screen27.png)

---------------------

24) Заканчиваем изменения и нажимаем “Продолжить”.

![Картинка](./Screen28.png)

---------------------

25) Соглашаемся на запись изменений

![Картинка](./Screen29.png)

---------------------

26) Выбираем ядро операционной системы. В нашем примере - 5.10 generic

![Картинка](./Screen30.png)

---------------------

27) Дожидаемся базовой установки операционной системы

![Картинка](./Screen31.png)

---------------------

28) Далее система предлагает установить программное обеспечение, исходя из ваших
потребностей. Снимите галочки с параметра “Игры”, “Приложения для работы с
сенсорным экраном”. Остальные параметры оставляем без изменений.

![Картинка](./Screen32.png)

---------------------

29) Дожидаемся установки операционной системы

![Картинка](./Screen33.png)

---------------------

30) Не выбираем установку дополнительных настроек операционной системы.
Если потребуется, установим их позже

![Картинка](./Screen34.png)

---------------------

31) Ожидаем установку системного загрузчика GRUB

![Картинка](./Screen35.png)

---------------------

# Это нужно знать!


---------------
**GRUB** (англ. GRand Unified Bootloader) — загрузчик операционной системы от
проекта GNU.

---------------------

32) Соглашаемся на установку системного загрузчика GRUB в главную запись.

![Картинка](./Screen36.png)

---------------------

33) Выбираем диск, на котором к этому моменту уже установлена операционная система

![Картинка](./Screen37.png)

---------------------

34) Ожидаем установку

![Картинка](./Screen38.png)

---------------------

35) Завершаем установку операционной системы

![Картинка](./Screen39.png)

---------------------

36) Система перезагрузится и пригласит нас к вводу логина и пароля. В нашей текущей
системе есть только один пользователь - Administrator

![Картинка](./Screen40.png)

---------------------

После ввода логина и пароля откроется рабочий стол AstraLinux Орёл.
Перед началом работы над следующей лабораторной работой, убедимся в
работоспособности сетевых репозиториев AstraLinux.

# Это нужно знать!


---------------
**Репозитории** – это иерархически-структурированные файловые сервера в
интернете, на которых хранятся скомпилированные пакеты приложений Linux и
другая сопутствующая к ним информация.


---------------------

Попробуем подключиться до download.astralinux.ru. Это один из основных сетевых
репозиториев, который поддерживается разработчиками Astra Linux.
В терминал Fly введите команду - **sudo apt update**

![Картинка](./Screen41.png)

В выводе команды не должно быть видимых ошибок.

![Картинка](./Screen42.png)

Также обратите внимание на слово “Пол:” - указывает на полученные от сетевого
репозитория ссылки.

Обратите внимание, что система построило дерево зависимостей и также уже
предлагает обновить около 400 пакетов (данное значение может отличаться)

**Работа по установке операционной системы выполнена.**

# Дополнительная информация:
1) https://inlnk.ru/NDBGNx - ссылка на Справочный центр Astra Linux
2) https://inlnk.ru/JjeAll - руководство по установке от разработчиков AstraLinux
